<!DOCTYPE html>
<html lang="en">
<head>
    <!-- IMPORTANT: Make sure your text editor saves this file with UTF-8 Encoding! -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Philosophy Quiz - Chapter 1</title> <!-- Changed Title -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], input[type="email"], input[type="tel"], input[type="password"] { width: 100%; padding: 8px; box-sizing: border-box; }
        input[type="radio"] { margin-right: 5px; }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; cursor: pointer; margin-right: 10px; border-radius: 5px; }
        button:hover { background-color: #0056b3; }
        .hidden { display: none; }
        #error-message, #password-error, #login-error { color: red; font-size: 1.2em; text-align: center; }
        #success-message { color: green; font-size: 1.2em; text-align: center; }
        #results, #review-section, #submission-copy { margin-top: 20px; text-align: left; border: 1px solid #ccc; padding: 15px; border-radius: 5px; background-color: #f9f9f9;}
        #password-section, #login-section { text-align: center; max-width: 400px; margin: 20px auto; padding: 20px; border: 1px solid #ccc; border-radius: 5px; background-color: #f9f9f9;}
        #password-section input[type="password"], #login-section input[type="text"], #login-section input[type="password"] { width: calc(100% - 18px); }
        .question-result { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        #download-pdf, #download-response { margin-top: 10px; }
        #score { font-weight: bold; text-align: center; color: green; font-size: 1.4em; margin-top: 20px; }
        #review-section h2, #submission-copy h2, #results h1 { margin-bottom: 15px; text-align: center; color: #007bff;}
        #review-section button, #submission-copy button, #password-section button, #login-section button, #results button { margin-top: 15px; }
        .choices p { margin: 2px 0 2px 20px; }
    </style>
</head>
<body>
    <div id="login-section">
        <h1>Login to Access Quiz</h1>
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" placeholder="Enter username" required>
        </div>
        <div class="form-group">
            <label for="login-password">Password:</label>
            <input type="password" id="login-password" placeholder="Enter password" required>
        </div>
        <button onclick="checkLogin()">Login</button>
        <p id="login-error" class="hidden">Incorrect username or password. Please try again.</p>
    </div>

    <div id="quiz-form" class="hidden">
        <h1>Introduction to Philosophy Quiz - Chapter 1</h1> <!-- Changed Title -->
        <form id="mcie-quiz"> <!-- ID Kept, but content changed -->
            <!-- Student Information -->
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="id_number">ID Number:</label>
                <input type="text" id="id_number" name="id_number" required>
            </div>
            <div class="form-group">
                <label for="section">Section:</label>
                <input type="text" id="section" name="section" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" required>
            </div>

            <!-- Introduction to Philosophy Multiple-Choice Questions -->
            <div class="form-group">
                <label>1. How is Logic often treated simultaneously?</label>
                <input type="radio" name="q1" value="A" required> A) As a science and an art<br>
                <input type="radio" name="q1" value="B"> B) As a field of study and an instrument<br>
                <input type="radio" name="q1" value="C"> C) As a theoretical and a practical discipline<br>
                <input type="radio" name="q1" value="D"> D) As a branch of mathematics and linguistics
            </div>
            <div class="form-group">
                <label>2. As an instrument, Logic primarily allows us to:</label>
                <input type="radio" name="q2" value="A" required> A) Discover new scientific facts<br>
                <input type="radio" name="q2" value="B"> B) Formulate rational arguments and evaluate others' arguments<br>
                <input type="radio" name="q2" value="C"> C) Understand the nature of beauty and art<br>
                <input type="radio" name="q2" value="D"> D) Achieve emotional well-being
            </div>
            <div class="form-group">
                <label>3. What is the etymological meaning of "philosophy"?</label>
                <input type="radio" name="q3" value="A" required> A) Study of existence<br>
                <input type="radio" name="q3" value="B"> B) Love of wisdom<br>
                <input type="radio" name="q3" value="C"> C) Pursuit of truth<br>
                <input type="radio" name="q3" value="D"> D) Knowledge of the good
            </div>
            <div class="form-group">
                <label>4. Pythagoras first used the term "philosopher" to describe someone demonstrating:</label>
                <input type="radio" name="q4" value="A" required> A) Great technical skill<br>
                <input type="radio" name="q4" value="B"> B) Political leadership<br>
                <input type="radio" name="q4" value="C"> C) Marked curiosity in experiences<br>
                <input type="radio" name="q4" value="D"> D) Reverence for religious dogma
            </div>
            <div class="form-group">
                <label>5. The Socratic understanding of wisdom emphasizes:</label>
                <input type="radio" name="q5" value="A" required> A) Accumulating vast amounts of information<br>
                <input type="radio" name="q5" value="B"> B) Mastering specific professional skills<br>
                <input type="radio" name="q5" value="C"> C) A critical habit, vigilance, and reverence for truth<br>
                <input type="radio" name="q5" value="D"> D) Accepting the apparent without question
            </div>
            <div class="form-group">
                <label>6. What does "questioning the apparent" in philosophy entail?</label>
                <input type="radio" name="q6" value="A" required> A) Denying the existence of the physical world<br>
                <input type="radio" name="q6" value="B"> B) Rejecting all common sense beliefs<br>
                <input type="radio" name="q6" value="C"> C) Dealing creatively with the phenomenal world and going beyond common understanding<br>
                <input type="radio" name="q6" value="D"> D) Focusing only on abstract, non-practical issues
            </div>
            <div class="form-group">
                <label>7. Philosophy, as a rational and critical enterprise, primarily relies on:</label>
                <input type="radio" name="q7" value="A" required> A) Emotional intuition<br>
                <input type="radio" name="q7" value="B"> B) Historical precedent<br>
                <input type="radio" name="q7" value="C"> C) Intensive application of reason (analysis, comparison, evaluation)<br>
                <input type="radio" name="q7" value="D"> D) Empirical scientific experimentation
            </div>
            <div class="form-group">
                <label>8. Philosophy's "constructive side" primarily involves:</label>
                <input type="radio" name="q8" value="A" required> A) Only criticizing the arguments of others<br>
                <input type="radio" name="q8" value="B"> B) Formulating rationally defensible answers to fundamental questions<br>
                <input type="radio" name="q8" value="C"> C) Analyzing the grammatical structure of language<br>
                <input type="radio" name="q8" value="D"> D) Cataloging different philosophical theories
            </div>
            <div class="form-group">
                <label>9. The formal sense of "doing" philosophy, as opposed to informally "having" one, involves:</label>
                <input type="radio" name="q9" value="A" required> A) Holding a set of uncritical beliefs about life<br>
                <input type="radio" name="q9" value="B"> B) A process of reflecting on and criticizing deeply held conceptions<br>
                <input type="radio" name="q9" value="C"> C) Agreeing with famous philosophers<br>
                <input type="radio" name="q9" value="D"> D) Expressing personal opinions without justification
            </div>
            <div class="form-group">
                <label>10. Which statement best reflects the relationship between "having" and "doing" philosophy?</label>
                <input type="radio" name="q10" value="A" required> A) They are entirely independent activities.<br>
                <input type="radio" name="q10" value="B"> B) Doing philosophy requires first having some informal beliefs to reflect upon.<br>
                <input type="radio" name="q10" value="C"> C) Having a philosophy is sufficient for doing philosophy well.<br>
                <input type="radio" name="q10" value="D"> D) One must do philosophy before they can have a philosophy.
            </div>
            <div class="form-group">
                <label>11. Philosophizing, as an activity, implies being:</label>
                <input type="radio" name="q11" value="A" required> A) Dogmatic and closed-minded<br>
                <input type="radio" name="q11" value="B"> B) Content with surface-level understanding<br>
                <input type="radio" name="q11" value="C"> C) Searching, critical, open-minded, and tolerant<br>
                <input type="radio" name="q11" value="D"> D) Focused solely on historical texts
            </div>
            <div class="form-group">
                <label>12. One reason philosophers often disagree is that they:</label>
                <input type="radio" name="q12" value="A" required> A) Refuse to use logic<br>
                <input type="radio" name="q12" value="B"> B) View things from different perspectives and assumptions<br>
                <input type="radio" name="q12" value="C"> C) Live in a static, unchanging universe<br>
                <input type="radio" name="q12" value="D"> D) Have access to complete and final evidence
            </div>
            <div class="form-group">
                <label>13. Philosophy's attempt to "look at the world as a whole" involves:</label>
                <input type="radio" name="q13" value="A" required> A) Focusing intensely on one scientific discipline<br>
                <input type="radio" name="q13" value="B"> B) Ignoring human experience in favor of pure logic<br>
                <input type="radio" name="q13" value="C"> C) Integrating knowledge from various sciences and experiences into a consistent worldview<br>
                <input type="radio" name="q13" value="D"> D) Accepting fragmented views of reality as sufficient
            </div>
            <div class="form-group">
                <label>14. The function of philosophy involving the logical analysis of language aims to:</label>
                <input type="radio" name="q14" value="A" required> A) Create new languages<br>
                <input type="radio" name="q14" value="B"> B) Prove the existence of God through grammar<br>
                <input type="radio" name="q14" value="C"> C) Clarify the meaning of words and concepts, exposing confusion<br>
                <input type="radio" name="q14" value="D"> D) Translate ancient philosophical texts
            </div>
            <div class="form-group">
                <label>15. Which of the following is presented as a typically philosophical question?</label>
                <input type="radio" name="q15" value="A" required> A) What is the boiling point of water?<br>
                <input type="radio" name="q15" value="B"> B) Did Ram file his income tax return correctly?<br>
                <input type="radio" name="q15" value="C"> C) What is the nature of truth and the distinction between right and wrong?<br>
                <input type="radio" name="q15" value="D"> D) How many planets are in the solar system?
            </div>
            <div class="form-group">
                <label>16. Metaphysics is the branch of philosophy primarily concerned with:</label>
                <input type="radio" name="q16" value="A" required> A) The principles of right reasoning<br>
                <input type="radio" name="q16" value="B"> B) The nature of beauty and art<br>
                <input type="radio" name="q16" value="C"> C) The ultimate nature of reality and existence<br>
                <input type="radio" name="q16" value="D"> D) The sources and limits of knowledge
            </div>
            <div class="form-group">
                <label>17. Which of these questions falls under the domain of Metaphysics?</label>
                <input type="radio" name="q17" value="A" required> A) How can we know if a statement is true?<br>
                <input type="radio" name="q17" value="B"> B) What makes an action morally right?<br>
                <input type="radio" name="q17" value="C"> C) Is reality ultimately composed of matter, spirit, or both?<br>
                <input type="radio" name="q17" value="D"> D) What constitutes a valid argument?
            </div>
            <div class="form-group">
                <label>18. The term "metaphysics" originated from:</label>
                <input type="radio" name="q18" value="A" required> A) Plato's dialogues on ideal forms<br>
                <input type="radio" name="q18" value="B"> B) The title given to Aristotle's works that came after his writings on physics<br>
                <input type="radio" name="q18" value="C"> C) Pre-Socratic speculations about the cosmos<br>
                <input type="radio" name="q18" value="D"> D) Medieval debates about the nature of God
            </div>
            <div class="form-group">
                <label>19. The cosmological aspect of metaphysics deals with questions about:</label>
                <input type="radio" name="q19" value="A" required> A) The nature and attributes of God<br>
                <input type="radio" name="q19" value="B"> B) The origin, nature, and development of the universe<br>
                <input type="radio" name="q19" value="C"> C) The relationship between mind and body<br>
                <input type="radio" name="q19" value="D"> D) The meaning of existence itself
            </div>
            <div class="form-group">
                <label>20. The theological aspect of metaphysics focuses on:</label>
                <input type="radio" name="q20" value="A" required> A) The study of human beings<br>
                <input type="radio" name="q20" value="B"> B) Conceptions of and about God<br>
                <input type="radio" name="q20" value="C"> C) The fundamental nature of matter<br>
                <input type="radio" name="q20" value="D"> D) The structure of space and time
            </div>
            <div class="form-group">
                <label>21. The anthropological aspect of metaphysics asks questions such as:</label>
                <input type="radio" name="q21" value="A" required> A) Is the universe designed or accidental?<br>
                <input type="radio" name="q21" value="B"> B) What is the relationship between mind and body, and do humans have free will?<br>
                <input type="radio" name="q21" value="C"> C) Is basic reality composed of one or many elements?<br>
                <input type="radio" name="q21" value="D"> D) Can we prove God's existence?
            </div>
            <div class="form-group">
                <label>22. Ontology, as a subset of metaphysics, specifically studies:</label>
                <input type="radio" name="q22" value="A" required> A) The origins of the cosmos<br>
                <input type="radio" name="q22" value="B"> B) The nature of existence and what it means for something to exist<br>
                <input type="radio" name="q22" value="C"> C) The problem of evil<br>
                <input type="radio" name="q22" value="D"> D) Human social structures
            </div>
            <div class="form-group">
                <label>23. Epistemology is primarily concerned with the study of:</label>
                <input type="radio" name="q23" value="A" required> A) Moral values<br>
                <input type="radio" name="q23" value="B"> B) Ultimate reality<br>
                <input type="radio" name="q23" value="C"> C) Beauty and art<br>
                <input type="radio" name="q23" value="D"> D) Knowledge (its nature, scope, sources, and validity)
            </div>
            <div class="form-group">
                <label>24. Which two fundamental questions does epistemology seek to answer?</label>
                <input type="radio" name="q24" value="A" required> A) What is real? and What is good?<br>
                <input type="radio" name="q24" value="B"> B) What is true? and How do we know?<br>
                <input type="radio" name="q24" value="C"> C) What is beauty? and What is justice?<br>
                <input type="radio" name="q24" value="D"> D) Does God exist? and Do we have free will?
            </div>
            <div class="form-group">
                <label>25. Skepticism, in its narrow epistemological sense, is the position that:</label>
                <input type="radio" name="q25" value="A" required> A) All knowledge comes from sense experience<br>
                <input type="radio" name="q25" value="B"> B) Humans cannot acquire reliable knowledge<br>
                <input type="radio" name="q25" value="C"> C) Reason is the primary source of knowledge<br>
                <input type="radio" name="q25" value="D"> D) Truth is relative to the individual
            </div>
            <div class="form-group">
                <label>26. Agnosticism is specifically a profession of ignorance regarding:</label>
                <input type="radio" name="q26" value="A" required> A) The nature of reality<br>
                <input type="radio" name="q26" value="B"> B) The existence or nonexistence of God<br>
                <input type="radio" name="q26" value="C"> C) The possibility of achieving moral certainty<br>
                <input type="radio" name="q26" value="D"> D) The reliability of sense perception
            </div>
            <div class="form-group">
                <label>27. The epistemological view that knowledge is primarily obtained through the senses is called:</label>
                <input type="radio" name="q27" value="A" required> A) Rationalism<br>
                <input type="radio" name="q27" value="B"> B) Skepticism<br>
                <input type="radio" name="q27" value="C"> C) Empiricism<br>
                <input type="radio" name="q27" value="D"> D) Intuitionism
            </div>
            <div class="form-group">
                <label>28. A key challenge or limitation associated with empiricism is that:</label>
                <input type="radio" name="q28" value="A" required> A) It relies too heavily on abstract logic<br>
                <input type="radio" name="q28" value="B"> B) Sense data can be incomplete, undependable, and subject to distortion<br>
                <input type="radio" name="q28" value="C"> C) It ignores the role of observation<br>
                <input type="radio" name="q28" value="D"> D) It cannot account for scientific progress
            </div>
            <div class="form-group">
                <label>29. Rationalism emphasizes the role of _______ in acquiring knowledge.</label>
                <input type="radio" name="q29" value="A" required> A) Sense experience<br>
                <input type="radio" name="q29" value="B"> B) Divine revelation<br>
                <input type="radio" name="q29" value="C"> C) Reasoning, thought, or logic<br>
                <input type="radio" name="q29" value="D"> D) Authoritative testimony
            </div>
            <div class="form-group">
                <label>30. A potential weakness of systems of thought based solely on logic (rationalism) is that they might:</label>
                <input type="radio" name="q30" value="A" required> A) Be too reliant on empirical verification<br>
                <input type="radio" name="q30" value="B"> B) Lack internal consistency<br>
                <input type="radio" name="q30" value="C"> C) Become disconnected from the external world<br>
                <input type="radio" name="q30" value="D"> D) Fail to organize sense data meaningfully
            </div>
            <div class="form-group">
                <label>31. Intuition, as a source of knowledge, refers to:</label>
                <input type="radio" name="q31" value="A" required> A) Knowledge gained through logical deduction<br>
                <input type="radio" name="q31" value="B"> B) Direct apprehension of knowledge without conscious reasoning or sense perception<br>
                <input type="radio" name="q31" value="C"> C) Knowledge accepted from experts<br>
                <input type="radio" name="q31" value="D"> D) Information received through divine communication
            </div>
            <div class="form-group">
                <label>32. A primary advantage claimed for revealed knowledge is that it:</label>
                <input type="radio" name="q32" value="A" required> A) Can be empirically verified by anyone<br>
                <input type="radio" name="q32" value="B"> B) Originates from an omniscient, transcendent source<br>
                <input type="radio" name="q32" value="C"> C) Is derived through logical proof<br>
                <input type="radio" name="q32" value="D"> D) Avoids any issues of interpretation
            </div>
            <div class="form-group">
                <label>33. Relying on authority as a source of knowledge involves accepting something as true because:</label>
                <input type="radio" name="q33" value="A" required> A) It has been personally experienced<br>
                <input type="radio" name="q33" value="B"> B) It logically follows from accepted premises<br>
                <input type="radio" name="q33" value="C"> C) It comes from experts or tradition<br>
                <input type="radio" name="q33" value="D"> D) It was arrived at through intuition
            </div>
            <div class="form-group">
                <label>34. A significant danger of relying solely on authoritative knowledge is that:</label>
                <input type="radio" name="q34" value="A" required> A) It discourages personal verification<br>
                <input type="radio" name="q34" value="B"> B) It can be based on incorrect assumptions and perpetuate distortions<br>
                <input type="radio" name="q34" value="C"> C) Civilization requires rejecting all authority<br>
                <input type="radio" name="q34" value="D"> D) Experts are always infallible
            </div>
            <div class="form-group">
                <label>35. Axiology is the philosophical study of:</label>
                <input type="radio" name="q35" value="A" required> A) Arguments and reasoning<br>
                <input type="radio" name="q35" value="B"> B) Reality and existence<br>
                <input type="radio" name="q35" value="C"> C) Knowledge and belief<br>
                <input type="radio" name="q35" value="D"> D) Value (including ethics, aesthetics, and social/political values)
            </div>
            <div class="form-group">
                <label>36. Ethics, or Moral Philosophy, is primarily concerned with:</label>
                <input type="radio" name="q36" value="A" required> A) The nature of beauty<br>
                <input type="radio" name="q36" value="B"> B) Principles of right and wrong human conduct<br>
                <input type="radio" name="q36" value="C"> C) The validity of arguments<br>
                <input type="radio" name="q36" value="D"> D) The structure of society
            </div>
            <div class="form-group">
                <label>37. Which of these questions is central to Ethics?</label>
                <input type="radio" name="q37" value="A" required> A) What constitutes a valid inference?<br>
                <input type="radio" name="q37" value="B"> B) What is the nature of time?<br>
                <input type="radio" name="q37" value="C"> C) Are moral principles universal or relative?<br>
                <input type="radio" name="q37" value="D"> D) Can we know the external world?
            </div>
            <div class="form-group">
                <label>38. Normative Ethics aims to:</label>
                <input type="radio" name="q38" value="A" required> A) Analyze the meaning of ethical terms like "good"<br>
                <input type="radio" name="q38" value="B"> B) Apply ethical principles to specific moral problems<br>
                <input type="radio" name="q38" value="C"> C) Study and determine the moral rules and principles for evaluating actions<br>
                <input type="radio" name="q38" value="D"> D) Investigate the historical development of moral codes
            </div>
            <div class="form-group">
                <label>39. Meta-ethics focuses on:</label>
                <input type="radio" name="q39" value="A" required> A) Determining which actions are right or wrong<br>
                <input type="radio" name="q39" value="B"> B) Investigating the meaning of ethical terms and the verification of ethical statements<br>
                <input type="radio" name="q39" value="C"> C) Developing codes of conduct for specific professions<br>
                <input type="radio" name="q39" value="D"> D) Studying comparative ethics across different cultures
            </div>
            <div class="form-group">
                <label>40. Applied Ethics involves:</label>
                <input type="radio" name="q40" value="A" required> A) Studying the history of ethical theories<br>
                <input type="radio" name="q40" value="B"> B) Analyzing the logic of moral language<br>
                <input type="radio" name="q40" value="C"> C) Attempting to resolve specific moral problems using ethical principles<br>
                <input type="radio" name="q40" value="D"> D) Questioning whether morality exists at all
            </div>
            <div class="form-group">
                <label>41. Aesthetics is the branch of axiology dealing with:</label>
                <input type="radio" name="q41" value="A" required> A) Political organization<br>
                <input type="radio" name="q41" value="B"> B) The nature of knowledge<br>
                <input type="radio" name="q41" value="C"> C) Principles of reasoning<br>
                <input type="radio" name="q41" value="D"> D) Beauty, art, and taste
            </div>
            <div class="form-group">
                <label>42. Which question belongs to the field of Aesthetics?</label>
                <input type="radio" name="q42" value="A" required> A) Is democracy the best form of government?<br>
                <input type="radio" name="q42" value="B"> B) Can the existence of God be proven?<br>
                <input type="radio" name="q42" value="C"> C) What is the relationship between art and truth?<br>
                <input type="radio" name="q42" value="D"> D) How do we justify moral judgments?
            </div>
            <div class="form-group">
                <label>43. Social/Political Philosophy, as a part of Axiology, examines:</label>
                <input type="radio" name="q43" value="A" required> A) The nature of perception<br>
                <input type="radio" name="q43" value="B"> B) Value judgments operating within a civil society (e.g., justice, best form of government)<br>
                <input type="radio" name="q43" value="C"> C) The relationship between mind and body<br>
                <input type="radio" name="q43" value="D"> D) The rules of logical deduction
            </div>
            <div class="form-group">
                <label>44. Logic, as a core field of philosophy, focuses on:</label>
                <input type="radio" name="q44" value="A" required> A) The study of value<br>
                <input type="radio" name="q44" value="B"> B) The nature of reality<br>
                <input type="radio" name="q44" value="C"> C) The principles and methods of right reasoning and argument evaluation<br>
                <input type="radio" name="q44" value="D"> D) The experience of beauty
            </div>
            <div class="form-group">
                <label>45. A central concern within the study of Logic is:</label>
                <input type="radio" name="q45" value="A" required> A) Determining the ultimate substance of the universe<br>
                <input type="radio" name="q45" value="B"> B) Defining the concept of justice<br>
                <input type="radio" name="q45" value="C"> C) Evaluating the validity and soundness of arguments<br>
                <input type="radio" name="q45" value="D"> D) Understanding the nature of consciousness
            </div>
            <div class="form-group">
                <label>46. Socrates' statement "The unexamined life is not worth living" highlights philosophy's role in promoting:</label>
                <input type="radio" name="q46" value="A" required> A) Material wealth<br>
                <input type="radio" name="q46" value="B"> B) Political power<br>
                <input type="radio" name="q46" value="C"> C) Critical self-examination and understanding<br>
                <input type="radio" name="q46" value="D"> D) Acceptance of tradition without question
            </div>
            <div class="form-group">
                <label>47. Developing "Intellectual and Behavioral Independence" through philosophy involves:</label>
                <input type="radio" name="q47" value="A" required> A) Agreeing with the majority opinion<br>
                <input type="radio" name="q47" value="B"> B) Forming one's own integrated and coherent worldview and acting upon it<br>
                <input type="radio" name="q47" value="C"> C) Rejecting all past philosophical ideas<br>
                <input type="radio" name="q47" value="D"> D) Focusing solely on practical skills
            </div>
            <div class="form-group">
                <label>48. Studying different philosophical perspectives primarily fosters which quality?</label>
                <input type="radio" name="q48" value="A" required> A) Dogmatism<br>
                <input type="radio" name="q48" value="B"> B) Narrow-mindedness<br>
                <input type="radio" name="q48" value="C"> C) Flexibility, Tolerance, and Open-Mindedness<br>
                <input type="radio" name="q48" value="D"> D) Apathy towards differing views
            </div>
            <div class="form-group">
                <label>49. Engaging with philosophy enhances "Creative and Critical Thinking" by developing abilities in:</label>
                <input type="radio" name="q49" value="A" required> A) Rote memorization<br>
                <input type="radio" name="q49" value="B"> B) Unquestioning acceptance of authority<br>
                <input type="radio" name="q49" value="C"> C) Analysis, reasoning, evaluation, theorizing, and justification<br>
                <input type="radio" name="q49" value="D"> D) Avoiding complex problems
            </div>
            <div class="form-group">
                <label>50. According to Bertrand Russell (as cited in the text), the value of philosophy lies partly in its uncertainty because it:</label>
                <input type="radio" name="q50" value="A" required> A) Provides definite answers to all questions<br>
                <input type="radio" name="q50" value="B"> B) Confirms common sense prejudices<br>
                <input type="radio" name="q50" value="C"> C) Frees the mind from the "tyranny of custom" and enlarges thought by suggesting possibilities<br>
                <input type="radio" name="q50" value="D"> D) Makes people feel certain about the nature of things
            </div>

            <button type="button" onclick="showReview()">Submit</button>
        </form>
        <div id="error-message" class="hidden">
            <p>Something went wrong. Please try again.</p>
        </div>
    </div>

    <div id="review-section" class="hidden">
        <h2>Review Your Answers</h2>
        <div id="review-content"></div>
        <button onclick="editForm()">Edit</button>
        <button onclick="downloadResponse()" id="download-response">Download My Response</button>
        <button onclick="confirmSubmission()">Confirm Submission</button>
    </div>

    <div id="submission-copy" class="hidden">
        <h2>Your Submitted Answers</h2>
        <div id="submission-content"></div>
        <button onclick="proceedToPassword()">Proceed</button>
    </div>

    <div id="password-section" class="hidden">
        <h1 id="success-message">Your response has been submitted</h1>
        <p>You can view your result (score) by entering the password.</p>
        <input type="password" id="password" placeholder="Enter password">
        <button onclick="checkPassword()">Submit</button>
        <p id="password-error" class="hidden">Incorrect password. Please try again.</p>
    </div>

    <div id="results" class="hidden">
        <h1>Quiz Results</h1>
        <p id="student-info"></p>
        <div id="answers"></div>
        <p id="score"></p>
        <button id="download-pdf" onclick="downloadPDF()">Download Results PDF</button>
    </div>

        <script>
        let quizData = null;
        let formData = null;
        const { jsPDF } = window.jspdf;
        const TOTAL_QUESTIONS = 50; // Total number of questions (Matches the form)

        // Define the chapter number for THIS specific quiz file (Chapter 1)
        const CURRENT_QUIZ_CHAPTER = 1;

        // *** UPDATED THIS LINE - DEFINE COURSE CODE ***
        const COURSE_CODE = 'PHIL1009'; // Course code updated

        // Valid login credentials (Remains the same)
        const validCredentials = [
            { username: 'section19', password: '123' },
            { username: 'section20', password: '123' },
            { username: 'muzemuza', password: 'moh' },
            { username: 'section21', password: '123' }
            // Add more valid credentials as needed
        ];

        // **** Introduction to Philosophy - Chapter 1 Questions (As provided in your HTML) ****
        const allQuestionsData = {
             q1: { text: 'How is Logic often treated simultaneously?', choices: { A: 'As a science and an art', B: 'As a field of study and an instrument', C: 'As a theoretical and a practical discipline', D: 'As a branch of mathematics and linguistics' } },
             q2: { text: "As an instrument, Logic primarily allows us to:", choices: { A: 'Discover new scientific facts', B: "Formulate rational arguments and evaluate others' arguments", C: 'Understand the nature of beauty and art', D: 'Achieve emotional well-being' } },
             q3: { text: 'What is the etymological meaning of "philosophy"?', choices: { A: 'Study of existence', B: 'Love of wisdom', C: 'Pursuit of truth', D: 'Knowledge of the good' } },
             q4: { text: 'Pythagoras first used the term "philosopher" to describe someone demonstrating:', choices: { A: 'Great technical skill', B: 'Political leadership', C: 'Marked curiosity in experiences', D: 'Reverence for religious dogma' } },
             q5: { text: 'The Socratic understanding of wisdom emphasizes:', choices: { A: 'Accumulating vast amounts of information', B: 'Mastering specific professional skills', C: 'A critical habit, vigilance, and reverence for truth', D: 'Accepting the apparent without question' } },
             q6: { text: 'What does "questioning the apparent" in philosophy entail?', choices: { A: 'Denying the existence of the physical world', B: 'Rejecting all common sense beliefs', C: 'Dealing creatively with the phenomenal world and going beyond common understanding', D: 'Focusing only on abstract, non-practical issues' } },
             q7: { text: 'Philosophy, as a rational and critical enterprise, primarily relies on:', choices: { A: 'Emotional intuition', B: 'Historical precedent', C: 'Intensive application of reason (analysis, comparison, evaluation)', D: 'Empirical scientific experimentation' } },
             q8: { text: "Philosophy's \"constructive side\" primarily involves:", choices: { A: 'Only criticizing the arguments of others', B: 'Formulating rationally defensible answers to fundamental questions', C: 'Analyzing the grammatical structure of language', D: 'Cataloging different philosophical theories' } },
             q9: { text: 'The formal sense of "doing" philosophy, as opposed to informally "having" one, involves:', choices: { A: 'Holding a set of uncritical beliefs about life', B: 'A process of reflecting on and criticizing deeply held conceptions', C: 'Agreeing with famous philosophers', D: 'Expressing personal opinions without justification' } },
             q10: { text: 'Which statement best reflects the relationship between "having" and "doing" philosophy?', choices: { A: 'They are entirely independent activities.', B: 'Doing philosophy requires first having some informal beliefs to reflect upon.', C: 'Having a philosophy is sufficient for doing philosophy well.', D: 'One must do philosophy before they can have a philosophy.' } },
             q11: { text: 'Philosophizing, as an activity, implies being:', choices: { A: 'Dogmatic and closed-minded', B: 'Content with surface-level understanding', C: 'Searching, critical, open-minded, and tolerant', D: 'Focused solely on historical texts' } },
             q12: { text: 'One reason philosophers often disagree is that they:', choices: { A: 'Refuse to use logic', B: 'View things from different perspectives and assumptions', C: 'Live in a static, unchanging universe', D: 'Have access to complete and final evidence' } },
             q13: { text: "Philosophy's attempt to \"look at the world as a whole\" involves:", choices: { A: 'Focusing intensely on one scientific discipline', B: 'Ignoring human experience in favor of pure logic', C: 'Integrating knowledge from various sciences and experiences into a consistent worldview', D: 'Accepting fragmented views of reality as sufficient' } },
             q14: { text: 'The function of philosophy involving the logical analysis of language aims to:', choices: { A: 'Create new languages', B: 'Prove the existence of God through grammar', C: 'Clarify the meaning of words and concepts, exposing confusion', D: 'Translate ancient philosophical texts' } },
             q15: { text: 'Which of the following is presented as a typically philosophical question?', choices: { A: 'What is the boiling point of water?', B: 'Did Ram file his income tax return correctly?', C: 'What is the nature of truth and the distinction between right and wrong?', D: 'How many planets are in the solar system?' } },
             q16: { text: 'Metaphysics is the branch of philosophy primarily concerned with:', choices: { A: 'The principles of right reasoning', B: 'The nature of beauty and art', C: 'The ultimate nature of reality and existence', D: 'The sources and limits of knowledge' } },
             q17: { text: 'Which of these questions falls under the domain of Metaphysics?', choices: { A: 'How can we know if a statement is true?', B: 'What makes an action morally right?', C: 'Is reality ultimately composed of matter, spirit, or both?', D: 'What constitutes a valid argument?' } },
             q18: { text: 'The term "metaphysics" originated from:', choices: { A: "Plato's dialogues on ideal forms", B: "The title given to Aristotle's works that came after his writings on physics", C: 'Pre-Socratic speculations about the cosmos', D: 'Medieval debates about the nature of God' } },
             q19: { text: 'The cosmological aspect of metaphysics deals with questions about:', choices: { A: 'The nature and attributes of God', B: 'The origin, nature, and development of the universe', C: 'The relationship between mind and body', D: 'The meaning of existence itself' } },
             q20: { text: 'The theological aspect of metaphysics focuses on:', choices: { A: 'The study of human beings', B: 'Conceptions of and about God', C: 'The fundamental nature of matter', D: 'The structure of space and time' } },
             q21: { text: 'The anthropological aspect of metaphysics asks questions such as:', choices: { A: 'Is the universe designed or accidental?', B: 'What is the relationship between mind and body, and do humans have free will?', C: 'Is basic reality composed of one or many elements?', D: "Can we prove God's existence?" } },
             q22: { text: 'Ontology, as a subset of metaphysics, specifically studies:', choices: { A: 'The origins of the cosmos', B: 'The nature of existence and what it means for something to exist', C: 'The problem of evil', D: 'Human social structures' } },
             q23: { text: 'Epistemology is primarily concerned with the study of:', choices: { A: 'Moral values', B: 'Ultimate reality', C: 'Beauty and art', D: 'Knowledge (its nature, scope, sources, and validity)' } },
             q24: { text: 'Which two fundamental questions does epistemology seek to answer?', choices: { A: 'What is real? and What is good?', B: 'What is true? and How do we know?', C: 'What is beauty? and What is justice?', D: 'Does God exist? and Do we have free will?' } },
             q25: { text: 'Skepticism, in its narrow epistemological sense, is the position that:', choices: { A: 'All knowledge comes from sense experience', B: 'Humans cannot acquire reliable knowledge', C: 'Reason is the primary source of knowledge', D: 'Truth is relative to the individual' } },
             q26: { text: 'Agnosticism is specifically a profession of ignorance regarding:', choices: { A: 'The nature of reality', B: 'The existence or nonexistence of God', C: 'The possibility of achieving moral certainty', D: 'The reliability of sense perception' } },
             q27: { text: 'The epistemological view that knowledge is primarily obtained through the senses is called:', choices: { A: 'Rationalism', B: 'Skepticism', C: 'Empiricism', D: 'Intuitionism' } },
             q28: { text: 'A key challenge or limitation associated with empiricism is that:', choices: { A: 'It relies too heavily on abstract logic', B: 'Sense data can be incomplete, undependable, and subject to distortion', C: 'It ignores the role of observation', D: 'It cannot account for scientific progress' } },
             q29: { text: 'Rationalism emphasizes the role of _______ in acquiring knowledge.', choices: { A: 'Sense experience', B: 'Divine revelation', C: 'Reasoning, thought, or logic', D: 'Authoritative testimony' } },
             q30: { text: 'A potential weakness of systems of thought based solely on logic (rationalism) is that they might:', choices: { A: 'Be too reliant on empirical verification', B: 'Lack internal consistency', C: 'Become disconnected from the external world', D: 'Fail to organize sense data meaningfully' } },
             q31: { text: 'Intuition, as a source of knowledge, refers to:', choices: { A: 'Knowledge gained through logical deduction', B: 'Direct apprehension of knowledge without conscious reasoning or sense perception', C: 'Knowledge accepted from experts', D: 'Information received through divine communication' } },
             q32: { text: 'A primary advantage claimed for revealed knowledge is that it:', choices: { A: 'Can be empirically verified by anyone', B: 'Originates from an omniscient, transcendent source', C: 'Is derived through logical proof', D: 'Avoids any issues of interpretation' } },
             q33: { text: 'Relying on authority as a source of knowledge involves accepting something as true because:', choices: { A: 'It has been personally experienced', B: 'It logically follows from accepted premises', C: 'It comes from experts or tradition', D: 'It was arrived at through intuition' } },
             q34: { text: 'A significant danger of relying solely on authoritative knowledge is that:', choices: { A: 'It discourages personal verification', B: 'It can be based on incorrect assumptions and perpetuate distortions', C: 'Civilization requires rejecting all authority', D: 'Experts are always infallible' } },
             q35: { text: 'Axiology is the philosophical study of:', choices: { A: 'Arguments and reasoning', B: 'Reality and existence', C: 'Knowledge and belief', D: 'Value (including ethics, aesthetics, and social/political values)' } },
             q36: { text: 'Ethics, or Moral Philosophy, is primarily concerned with:', choices: { A: 'The nature of beauty', B: 'Principles of right and wrong human conduct', C: 'The validity of arguments', D: 'The structure of society' } },
             q37: { text: 'Which of these questions is central to Ethics?', choices: { A: 'What constitutes a valid inference?', B: 'What is the nature of time?', C: 'Are moral principles universal or relative?', D: 'Can we know the external world?' } },
             q38: { text: 'Normative Ethics aims to:', choices: { A: 'Analyze the meaning of ethical terms like "good"<br>', B: 'Apply ethical principles to specific moral problems<br>', C: 'Study and determine the moral rules and principles for evaluating actions<br>', D: 'Investigate the historical development of moral codes' } },
             q39: { text: 'Meta-ethics focuses on:', choices: { A: 'Determining which actions are right or wrong', B: 'Investigating the meaning of ethical terms and the verification of ethical statements', C: 'Developing codes of conduct for specific professions', D: 'Studying comparative ethics across different cultures' } },
             q40: { text: 'Applied Ethics involves:', choices: { A: 'Studying the history of ethical theories', B: 'Analyzing the logic of moral language', C: 'Attempting to resolve specific moral problems using ethical principles', D: 'Questioning whether morality exists at all' } },
             q41: { text: 'Aesthetics is the branch of axiology dealing with:', choices: { A: 'Political organization', B: 'The nature of knowledge', C: 'Principles of reasoning', D: 'Beauty, art, and taste' } },
             q42: { text: 'Which question belongs to the field of Aesthetics?', choices: { A: 'Is democracy the best form of government?', B: 'Can the existence of God be proven?', C: 'What is the relationship between art and truth?', D: 'How do we justify moral judgments?' } },
             q43: { text: 'Social/Political Philosophy, as a part of Axiology, examines:', choices: { A: 'The nature of perception', B: 'Value judgments operating within a civil society (e.g., justice, best form of government)', C: 'The relationship between mind and body', D: 'The rules of logical deduction' } },
             q44: { text: 'Logic, as a core field of philosophy, focuses on:', choices: { A: 'The study of value', B: 'The nature of reality', C: 'The principles and methods of right reasoning and argument evaluation', D: 'The experience of beauty' } },
             q45: { text: 'A central concern within the study of Logic is:', choices: { A: 'Determining the ultimate substance of the universe', B: 'Defining the concept of justice', C: 'Evaluating the validity and soundness of arguments', D: 'Understanding the nature of consciousness' } },
             q46: { text: "Socrates' statement \"The unexamined life is not worth living\" highlights philosophy's role in promoting:", choices: { A: 'Material wealth', B: 'Political power', C: 'Critical self-examination and understanding', D: 'Acceptance of tradition without question' } },
             q47: { text: 'Developing "Intellectual and Behavioral Independence" through philosophy involves:', choices: { A: 'Agreeing with the majority opinion', B: "Forming one's own integrated and coherent worldview and acting upon it", C: 'Rejecting all past philosophical ideas', D: 'Focusing solely on practical skills' } },
             q48: { text: 'Studying different philosophical perspectives primarily fosters which quality?', choices: { A: 'Dogmatism', B: 'Narrow-mindedness', C: 'Flexibility, Tolerance, and Open-Mindedness', D: 'Apathy towards differing views' } },
             q49: { text: 'Engaging with philosophy enhances "Creative and Critical Thinking" by developing abilities in:', choices: { A: 'Rote memorization', B: 'Unquestioning acceptance of authority', C: 'Analysis, reasoning, evaluation, theorizing, and justification', D: 'Avoiding complex problems' } },
             q50: { text: 'According to Bertrand Russell (as cited in the text), the value of philosophy lies partly in its uncertainty because it:', choices: { A: 'Provides definite answers to all questions', B: 'Confirms common sense prejudices', C: 'Frees the mind from the "tyranny of custom" and enlarges thought by suggesting possibilities', D: 'Makes people feel certain about the nature of things' } }
        };

        // **** Correct answers mapped to letters (Philosophy Ch1 - As provided) ****
        const correctAnswersMap = {
             q1: 'B', q2: 'B', q3: 'B', q4: 'C', q5: 'C',
             q6: 'C', q7: 'C', q8: 'B', q9: 'B', q10: 'B',
             q11: 'C', q12: 'B', q13: 'C', q14: 'C', q15: 'C',
             q16: 'C', q17: 'C', q18: 'B', q19: 'B', q20: 'B',
             q21: 'B', q22: 'B', q23: 'D', q24: 'B', q25: 'B',
             q26: 'B', q27: 'C', q28: 'B', q29: 'C', q30: 'C',
             q31: 'B', q32: 'B', q33: 'C', q34: 'B', q35: 'D',
             q36: 'B', q37: 'C', q38: 'C', q39: 'B', q40: 'C',
             q41: 'D', q42: 'C', q43: 'B', q44: 'C', q45: 'C',
             q46: 'C', q47: 'B', q48: 'C', q49: 'C', q50: 'C'
        };

        function checkLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('login-password').value.trim();
            const errorMessage = document.getElementById('login-error');
            const loginSection = document.getElementById('login-section');
            const quizForm = document.getElementById('quiz-form');

            const isValid = validCredentials.some(cred =>
                cred.username === username && cred.password === password
            );

            if (isValid) {
                errorMessage.classList.add('hidden');
                loginSection.classList.add('hidden');
                quizForm.classList.remove('hidden');
            } else {
                errorMessage.classList.remove('hidden');
            }
        }

        function showReview() {
            const form = document.getElementById('mcie-quiz');
            formData = new FormData(form);
            const data = Object.fromEntries(formData);

             // Check if all questions are answered
             let allAnswered = true;
             for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 if (!data[`q${i}`]) {
                     allAnswered = false;
                     break;
                 }
             }

             if (!data.name || !data.id_number || !data.section || !data.email || !data.phone || !allAnswered) {
                 alert('Please fill in all personal information and answer all questions before submitting.');
                 return; // Stop the function if validation fails
             }

            // Store quiz data temporarily
            quizData = {
                name: data.name,
                id_number: data.id_number,
                section: data.section,
                email: data.email,
                phone: data.phone,
                answers: {},
                questions: allQuestionsData, // Use the updated structure
                chapter: CURRENT_QUIZ_CHAPTER, // Added chapter to quizData
                courseCode: COURSE_CODE // Added course code to quizData
            };

            // Construct the formatted chapter string for display
             const formattedCourseChapter = `${quizData.courseCode} Chapter ${quizData.chapter}`;


            // Populate answers dynamically
            let reviewHTML = `
                <p><strong>Name:</strong> ${data.name}</p>
                <p><strong>ID Number:</strong> ${data.id_number}</p>
                <p><strong>Section:</strong> ${data.section}</p>
                <p><strong>Email:</strong> ${data.email}</p>
                <p><strong>Phone Number:</strong> ${data.phone}</p>
                 <p><strong>Chapter:</strong> ${quizData.chapter}</p>
                 <p><strong>Course & Chapter:</strong> ${formattedCourseChapter}</p> <!-- Added formatted chapter to review display -->
                <hr>
                <h3>Your Answers:</h3>
            `;

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const qKey = `q${i}`;
                const userAnswer = data[qKey];
                quizData.answers[qKey] = userAnswer; // Store answer
                const questionInfo = allQuestionsData[qKey];
                const answerText = questionInfo.choices[userAnswer] || 'Not Answered';
                reviewHTML += `<p><strong>Question ${i}:</strong> ${questionInfo.text}<br>Your answer: ${userAnswer}) ${answerText}</p>`;
            }

            // Display review content
            const reviewContent = document.getElementById('review-content');
            reviewContent.innerHTML = reviewHTML;

            // Show review section
            document.getElementById('quiz-form').classList.add('hidden');
            document.getElementById('review-section').classList.remove('hidden');
        }

        function editForm() {
            document.getElementById('review-section').classList.add('hidden');
            document.getElementById('quiz-form').classList.remove('hidden');
        }

        function downloadResponse() {
            if (!quizData) return;

            const doc = new jsPDF();
            let y = 10;
            const pageHeight = doc.internal.pageSize.height;
            const pageWidth = doc.internal.pageSize.width;
            const margin = 10;
            const effectiveWidth = pageWidth - margin * 2;

             const formattedCourseChapter = `${quizData.courseCode} Chapter ${quizData.chapter}`;


            doc.setFontSize(16);
            doc.text(`${formattedCourseChapter} Quiz Response`, pageWidth / 2, y, { align: 'center' }); // Updated Title
            y += 10;

            doc.setFontSize(12);
            doc.text(`Name: ${quizData.name}`, margin, y); y += 7;
            doc.text(`ID: ${quizData.id_number}`, margin, y); y += 7;
            doc.text(`Section: ${quizData.section}`, margin, y); y += 7;
            doc.text(`Email: ${quizData.email}`, margin, y); y += 7;
            doc.text(`Phone: ${quizData.phone}`, margin, y); y += 7;
            doc.text(`Chapter: ${quizData.chapter}`, margin, y); y += 7;
            doc.text(`Course & Chapter: ${formattedCourseChapter}`, margin, y); y += 10; // Added formatted chapter to PDF


            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const question = quizData.questions[qKey];
                 const userAnswer = quizData.answers[qKey];
                 const answerText = question.choices[userAnswer] || 'Not Answered';
                 const questionText = question.text;

                 // Estimate space needed for the question + answer
                 const questionLines = doc.splitTextToSize(`Question ${i}: ${questionText}`, effectiveWidth);
                 const answerLines = doc.splitTextToSize(`Your answer: ${userAnswer}) ${answerText}`, effectiveWidth);
                 const spaceNeeded = (questionLines.length * 5) + 2 + (answerLines.length * 5) + 5;

                 if (y + spaceNeeded > pageHeight - margin) {
                    doc.addPage();
                    y = margin;
                 }

                doc.setFont('helvetica', 'bold');
                doc.text(questionLines, margin, y);
                y += (questionLines.length * 5) + 2;
                doc.setFont('helvetica', 'normal');

                if (y > pageHeight - margin) { doc.addPage(); y = margin; }

                doc.text(answerLines, margin, y);
                y += (answerLines.length * 5) + 5;

            }

            // Updated filename
            doc.save(`${formattedCourseChapter.replace(/ /g, '_')}_response_${quizData.id_number}.pdf`);
        }

        // --- MODIFIED: confirmSubmission Function ---
        async function confirmSubmission() {
            if (confirm('Are you sure you want to submit your answers?')) {
                if (!quizData || !formData) {
                     console.error("Quiz data or form data is missing.");
                     alert("Error: Cannot submit. Please try filling the form again.");
                     editForm(); // Go back to edit
                     return;
                }

                const data = Object.fromEntries(formData);

                // Calculate score
                let score = 0;
                for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                    const qKey = `q${i}`;
                    if (data[qKey] === correctAnswersMap[qKey]) {
                        score++;
                    }
                }

                // Update quizData with score (Optional but good practice)
                quizData.score = score;

                // *** CONSTRUCT THE FORMATTED CHAPTER STRING ***
                const formattedCourseChapter = `${COURSE_CODE} Chapter ${CURRENT_QUIZ_CHAPTER}`;


                // Prepare data for YOUR backend
                const submissionData = {
                    name: data.name,
                    id_number: data.id_number,
                    section: data.section,
                    email: data.email,
                    phone: data.phone,
                    score: score,
                    totalQuestions: TOTAL_QUESTIONS,
                    quizChapter: CURRENT_QUIZ_CHAPTER, // Keep the integer
                    // quizTitle: "Introduction to Philosophy Quiz - Chapter 1", // You can keep or remove this
                    // submittedAt: new Date().toISOString(),
                    // answers: quizData.answers // You can add this if your backend table had a jsonb column for answers

                    // *** ADD THE NEW FIELD WITH THE FORMATTED STRING ***
                    course_chapter_formatted: formattedCourseChapter,
                };

                console.log("Submitting quiz data:", submissionData);

                try {
                    // Show "Submitting..." message or spinner here if desired

                    const response = await fetch('/submit-quiz', { // Point to your backend endpoint
                        method: 'POST',
                        body: JSON.stringify(submissionData), // Send the data as JSON
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json' // Important Header!
                        }
                    });

                    if (response.ok) {
                        const result = await response.json();
                        console.log('Submission successful:', result);
                        alert("Quiz submitted successfully!"); // Provide feedback to user

                        // Show submission copy
                        const submissionContent = document.getElementById('submission-content');
                         let submissionHTML = `
                            <p><strong>Name:</strong> ${quizData.name}</p>
                            <p><strong>ID Number:</strong> ${quizData.id_number}</p>
                            <p><strong>Section:</strong> ${quizData.section}</p>
                            <p><strong>Email:</strong> ${quizData.email}</p>
                            <p><strong>Phone Number:</strong> ${quizData.phone}</p>
                            <p><strong>Chapter:</strong> ${quizData.chapter}</p>
                             <p><strong>Course & Chapter:</strong> ${formattedCourseChapter}</p> <!-- Added formatted chapter to submission copy -->
                            <hr>
                            <h3>Submitted Answers:</h3>
                        `;
                         for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                             const qKey = `q${i}`;
                             const questionInfo = quizData.questions[qKey];
                             const userAnswer = quizData.answers[qKey];
                             const answerText = questionInfo.choices[userAnswer] || 'Not Answered';
                             submissionHTML += `<p><strong>Question ${i}:</strong> ${questionInfo.text}<br>Your answer: ${userAnswer}) ${answerText}</p>`;
                         }
                        submissionContent.innerHTML = submissionHTML;

                        document.getElementById('review-section').classList.add('hidden');
                        document.getElementById('submission-copy').classList.remove('hidden');


                    } else {
                        let errorMsg = `Submission failed with status: ${response.status}`;
                        try {
                            const errorData = await response.json();
                            errorMsg = errorData.error || errorData.message || errorMsg;
                        } catch(e) { /* Ignore if response isn't JSON */ }

                        console.error('Backend submission error:', errorMsg);
                        document.getElementById('error-message').innerHTML = `<p>Submission failed: ${errorMsg}. Please try again.</p>`;
                        document.getElementById('error-message').classList.remove('hidden');
                        document.getElementById('review-section').classList.add('hidden');
                    }
                } catch (error) {
                    console.error('Network/Fetch error:', error);
                    document.getElementById('error-message').innerHTML = `<p>An network error occurred during submission. Please check your connection and try again.</p>`;
                    document.getElementById('error-message').classList.remove('hidden');
                    document.getElementById('review-section').classList.add('hidden');
                }
            }
        }


        function proceedToPassword() {
            document.getElementById('submission-copy').classList.add('hidden');
            document.getElementById('password-section').classList.remove('hidden');
        }

        function checkPassword() {
            const passwordInput = document.getElementById('password').value;
            const correctPassword = 'password'; // Keep the simple password
            const errorMessage = document.getElementById('password-error');
            const passwordSection = document.getElementById('password-section');
            const results = document.getElementById('results');

            if (passwordInput === correctPassword) {
                errorMessage.classList.add('hidden');
                passwordSection.classList.add('hidden');
                results.classList.remove('hidden');
                displayResults();
            } else {
                errorMessage.classList.remove('hidden');
            }
        }

        function displayResults() {
            if (!quizData) {
                document.getElementById('results').innerHTML = '<p>Error: No quiz data found. Please complete the quiz first.</p>';
                return;
            }

             // Combine correct answer letter with full text for display
             const displayCorrectAnswers = {};
             for(let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const correctLetter = correctAnswersMap[qKey];
                 const correctText = allQuestionsData[qKey].choices[correctLetter];
                 displayCorrectAnswers[qKey] = `${correctLetter}) ${correctText}`;
             }

            const formattedCourseChapter = `${quizData.courseCode} Chapter ${quizData.chapter}`;

            // Added formatted chapter to results display
            document.getElementById('student-info').innerHTML = `<strong>Name:</strong> ${quizData.name}<br><strong>ID:</strong> ${quizData.id_number}<br><strong>Section:</strong> ${quizData.section}<br><strong>Email:</strong> ${quizData.email}<br><strong>Phone:</strong> ${quizData.phone}<br><strong>Chapter:</strong> ${quizData.chapter}<br><strong>Course & Chapter:</strong> ${formattedCourseChapter}`;


            const answersDiv = document.getElementById('answers');
            let answersHTML = '<h3>Detailed Results:</h3>';

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const question = quizData.questions[qKey];
                 const userAnswer = quizData.answers[qKey];
                 const userAnswerText = question.choices[userAnswer] || 'Not Answered';
                 const isCorrect = userAnswer === correctAnswersMap[qKey];

                 answersHTML += `
                    <div class="question-result">
                        <p><strong>Question ${i}:</strong> ${question.text}</p>
                        <div class="choices" style="font-size:0.9em; margin-left: 15px;">
                            <p>A) ${question.choices.A}</p>
                            <p>B) ${question.choices.B}</p>
                            <p>C) ${question.choices.C}</p>
                            <p>D) ${question.choices.D}</p>
                        </div>
                        <p>Your answer: ${userAnswer}) ${userAnswerText} ${isCorrect ? '<span style="color:green; font-weight:bold;">(Correct)</span>' : '<span style="color:red; font-weight:bold;">(Incorrect)</span>'}</p>
                        ${!isCorrect ? `<p style="color:blue;">Correct answer: ${displayCorrectAnswers[qKey]}</p>` : ''}
                    </div>
                `;
            }
            answersDiv.innerHTML = answersHTML;


            document.getElementById('score').textContent = `Final Score: ${quizData.score} / ${TOTAL_QUESTIONS}`;
        }

        function downloadPDF() {
            if (!quizData) return;

            const doc = new jsPDF();
            let y = 10;
            const pageHeight = doc.internal.pageSize.height;
            const pageWidth = doc.internal.pageSize.width;
            const margin = 10;
            const effectiveWidth = pageWidth - margin * 2;

             // Combine correct answer letter with full text for display
             const displayCorrectAnswers = {};
             for(let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const correctLetter = correctAnswersMap[qKey];
                 const correctText = allQuestionsData[qKey].choices[correctLetter];
                 displayCorrectAnswers[qKey] = `${correctLetter}) ${correctText}`;
             }

            const formattedCourseChapter = `${quizData.courseCode} Chapter ${quizData.chapter}`;

            doc.setFontSize(16);
            doc.text(`${formattedCourseChapter} Quiz Results`, pageWidth / 2, y, { align: 'center' });
            y += 10;

            doc.setFontSize(12);
            doc.text(`Name: ${quizData.name}`, margin, y); y += 7;
            doc.text(`ID: ${quizData.id_number}`, margin, y); y += 7;
            doc.text(`Section: ${quizData.section}`, margin, y); y += 7;
            doc.text(`Email: ${quizData.email}`, margin, y); y += 7;
            doc.text(`Phone: ${quizData.phone}`, margin, y); y += 7;
             // Added formatted chapter to PDF
            doc.text(`Course & Chapter: ${formattedCourseChapter}`, margin, y); y += 10;


            doc.setFont('helvetica', 'bold');
            doc.text(`Final Score: ${quizData.score} / ${TOTAL_QUESTIONS}`, pageWidth / 2, y, { align: 'center' });
            y += 10;
            doc.setFont('helvetica', 'normal');


            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const question = quizData.questions[qKey];
                 const userAnswer = quizData.answers[qKey];
                 const userAnswerText = question.choices[userAnswer] || 'Not Answered';
                 const isCorrect = userAnswer === correctAnswersMap[qKey];
                 const questionText = question.text;
                 const correctAnswerFull = displayCorrectAnswers[qKey];

                 // Estimate space needed
                 const qLines = doc.splitTextToSize(`Question ${i}: ${questionText}`, effectiveWidth);
                 const choicesLines = 4 * 5; // Estimate for 4 choices at 5 units per line height
                 const yourAnsLines = doc.splitTextToSize(`Your answer: ${userAnswer}) ${userAnswerText} ${isCorrect ? '(Correct)' : '(Incorrect)'}`, effectiveWidth);
                 const correctAnsLinesHeight = isCorrect ? 0 : doc.splitTextToSize(`Correct answer: ${correctAnswerFull}`, effectiveWidth).length * 5; // Height needed for correct answer if wrong
                 const spaceNeeded = (qLines.length * 5) + 2 + choicesLines + 7 + (yourAnsLines.length * 5) + 7 + correctAnsLinesHeight + 5;


                 if (y + spaceNeeded > pageHeight - margin) {
                    doc.addPage();
                    y = margin;
                }

                doc.setFont('helvetica', 'bold');
                doc.text(qLines, margin, y);
                y += (qLines.length * 5) + 2;
                doc.setFont('helvetica', 'normal');

                 const remainingSpaceAfterQuestion = pageHeight - margin - y;
                 const answersSectionSpace = choicesLines + 7 + (yourAnsLines.length * 5) + 7 + correctAnsLinesHeight + 5;

                 if (answersSectionSpace > remainingSpaceAfterQuestion) {
                     doc.addPage();
                     y = margin;
                 }


                doc.setFontSize(10);
                doc.text(`  A) ${question.choices.A}`, margin + 5, y); y += 5;
                doc.text(`  B) ${question.choices.B}`, margin + 5, y); y += 5;
                doc.text(`  C) ${question.choices.C}`, margin + 5, y); y += 5;
                doc.text(`  D) ${question.choices.D}`, margin + 5, y); y += 7;
                doc.setFontSize(12);


                doc.text(`Your answer: ${userAnswer}) ${userAnswerText} ${isCorrect ? '(Correct)' : '(Incorrect)'}`, margin, y); y += 7;

                if (!isCorrect) {
                    doc.setTextColor(0, 0, 255);
                    doc.text(`Correct answer: ${correctAnswerFull}`, margin, y); y += 7;
                    doc.setTextColor(0, 0, 0);
                }
                y += 5;

            }

            if (y > pageHeight - margin) { doc.addPage(); y = margin; }
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text(`Final Score: ${quizData.score} / ${TOTAL_QUESTIONS}`, pageWidth / 2, y, { align: 'center' });

            // Updated filename to include formatted chapter
            doc.save(`${formattedCourseChapter.replace(/ /g, '_')}_results_${quizData.id_number}.pdf`);
        }
    </script>
</body>
</html>
</body>
</html>
